<div class="main-container">
    <h1 *ngIf="group.id == null">Crear grupo</h1>
    <h1 *ngIf="group.id != null">Editar grupo</h1>

    
    <form>
        <mat-form-field>
            <mat-label>Título</mat-label>
            <input type="text" matInput placeholder="Título" [(ngModel)]="group.name" name="name" required>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Descripción</mat-label>
            <input type="text" matInput placeholder="Descripción" [(ngModel)]="group.description" name="description">
        </mat-form-field>

        <mat-form-field>
            <mat-label>Miembros del grupo</mat-label>

            <mat-chip-list #chipGrid>
                <mat-chip *ngFor="let user of group.members" (removed)="remove(user)">
                    {{user.name}}
                    <button matChipRemove><mat-icon>cancel</mat-icon></button>
                </mat-chip>
            </mat-chip-list>

            <input placeholder="Nuevo miembro..." #userInput [formControl]="userCtrl"
            [matChipInputFor]="chipGrid" [matAutocomplete]="auto" (matChipInputTokenEnd)="add($event)">
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">

                <ng-container *ngFor="let user of filteredUsers | async">
                    <mat-option *ngIf="!group.members.includes(user)" [value]="user">
                        {{user.name}}
                    </mat-option>
                </ng-container>
            </mat-autocomplete>
        </mat-form-field>
    </form>
   
    
    <div class="buttons">
        <button mat-stroked-button (click)="onClose()">Cerrar</button>
        <button mat-flat-button color="primary" (click)="onSave()">Guardar</button>
    </div>
</div>